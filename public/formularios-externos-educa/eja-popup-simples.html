<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EJA Popup Simples - Exemplo</title>
</head>
<body>
    <div style="padding: 20px; font-family: Arial, sans-serif;">
        <h1>üéì EJA Popup Simples</h1>
        <p>Clique no bot√£o para abrir o popup:</p>
        
        <!-- Bot√£o de exemplo -->
        <button onclick="abrirPopup()" style="background: #28a745; color: white; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
            üìö Quero me formar no EJA!
        </button>
    </div>

    <!-- POPUP SIMPLES E FLUIDO -->
    <div id="popup-overlay" style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: 9999;
        backdrop-filter: blur(2px);
    ">
        <div id="popup-container" style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 12px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 400px;
            max-height: 85vh;
            overflow-y: auto;
        ">
            <!-- Header -->
            <div style="
                background: linear-gradient(135deg, #28a745, #20c997);
                color: white;
                padding: 20px;
                border-radius: 12px 12px 0 0;
                text-align: center;
                position: relative;
            ">
                <h2 style="margin: 0; font-size: 18px;">üáßüá∑ EJA Educa Brasil</h2>
                <button onclick="fecharPopup()" style="
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    background: rgba(255, 255, 255, 0.2);
                    border: none;
                    color: white;
                    font-size: 20px;
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    cursor: pointer;
                ">&times;</button>
            </div>

            <!-- Conte√∫do -->
            <div style="padding: 25px;">
                <div style="
                    background: #f8f9fa;
                    border-left: 4px solid #28a745;
                    padding: 15px;
                    margin-bottom: 20px;
                    border-radius: 4px;
                    font-size: 14px;
                ">
                    <strong>üéì Termine seus estudos com o EJA!</strong><br>
                    Preencha o formul√°rio e receba informa√ß√µes completas.
                </div>

                <!-- Formul√°rio -->
                <form id="eja-form" onsubmit="enviarFormulario(event)">
                    <input type="text" name="nome" placeholder="Seu nome completo" required style="
                        width: 100%;
                        padding: 12px;
                        margin-bottom: 15px;
                        border: 2px solid #e9ecef;
                        border-radius: 6px;
                        font-size: 16px;
                        box-sizing: border-box;
                    ">
                    
                    <input type="email" name="email" placeholder="Seu melhor e-mail" required style="
                        width: 100%;
                        padding: 12px;
                        margin-bottom: 15px;
                        border: 2px solid #e9ecef;
                        border-radius: 6px;
                        font-size: 16px;
                        box-sizing: border-box;
                    ">
                    
                    <input type="tel" name="telefone" placeholder="WhatsApp (com DDD)" required style="
                        width: 100%;
                        padding: 12px;
                        margin-bottom: 15px;
                        border: 2px solid #e9ecef;
                        border-radius: 6px;
                        font-size: 16px;
                        box-sizing: border-box;
                    ">
                    
                    <select name="escolaridade" required style="
                        width: 100%;
                        padding: 12px;
                        margin-bottom: 20px;
                        border: 2px solid #e9ecef;
                        border-radius: 6px;
                        font-size: 16px;
                        box-sizing: border-box;
                    ">
                        <option value="">Selecione sua escolaridade</option>
                        <option value="fundamental_incompleto">Ensino Fundamental Incompleto</option>
                        <option value="fundamental_completo">Ensino Fundamental Completo</option>
                        <option value="medio_incompleto">Ensino M√©dio Incompleto</option>
                        <option value="superior_incompleto">Superior Incompleto</option>
                    </select>
                    
                    <button type="submit" style="
                        width: 100%;
                        background: linear-gradient(135deg, #28a745, #20c997);
                        color: white;
                        padding: 15px;
                        border: none;
                        border-radius: 6px;
                        font-size: 16px;
                        font-weight: bold;
                        cursor: pointer;
                    ">
                        üìö Quero me formar agora!
                    </button>
                </form>

                <!-- Loading -->
                <div id="loading" style="display: none; text-align: center; padding: 20px;">
                    <div style="
                        border: 3px solid #f3f3f3;
                        border-top: 3px solid #28a745;
                        border-radius: 50%;
                        width: 30px;
                        height: 30px;
                        animation: spin 1s linear infinite;
                        margin: 0 auto 10px;
                    "></div>
                    <p>Enviando seus dados...</p>
                </div>

                <!-- Resultado -->
                <div id="resultado" style="display: none; text-align: center; padding: 20px;">
                    <div style="color: #28a745; font-size: 18px; font-weight: bold; margin-bottom: 10px;">
                        ‚úÖ Dados enviados com sucesso!
                    </div>
                    <p>Em breve voc√™ receber√° as informa√ß√µes no seu WhatsApp.</p>
                    
                    <div style="
                        background: #e8f5e8;
                        border: 1px solid #28a745;
                        border-radius: 8px;
                        padding: 15px;
                        margin-top: 15px;
                    ">
                        <div style="font-weight: bold; color: #155724; margin-bottom: 5px;">
                            üë®‚Äçüéì Consultor Educacional
                        </div>
                        <div>Paulo Silva - Especialista EJA</div>
                        <a href="#" id="whatsapp-link" target="_blank" style="
                            background: #25d366;
                            color: white;
                            padding: 10px 20px;
                            border-radius: 20px;
                            text-decoration: none;
                            display: inline-block;
                            margin-top: 10px;
                            font-weight: bold;
                        ">
                            üí¨ Falar no WhatsApp
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsividade */
        @media (max-width: 768px) {
            #popup-container {
                width: 95% !important;
                max-height: 90vh !important;
            }
        }

        @media (max-width: 480px) {
            #popup-container {
                width: 98% !important;
                border-radius: 8px !important;
            }
            
            #popup-container > div:first-child {
                padding: 15px !important;
                border-radius: 8px 8px 0 0 !important;
            }
            
            #popup-container > div:last-child {
                padding: 20px !important;
            }
        }

        /* Evita zoom no iOS */
        input, select {
            font-size: 16px !important;
        }
    </style>

    <script>
        // Configura√ß√µes
        const CONFIG = {
            webhookUrl: 'https://gestao-educa.autoflixtreinamentos.com/api/webhook/lead-externo',
            consultorWhatsApp: '5511999999999'
        };

        // Abrir popup
        function abrirPopup() {
            document.getElementById('popup-overlay').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // Fechar popup
        function fecharPopup() {
            document.getElementById('popup-overlay').style.display = 'none';
            document.body.style.overflow = '';
            resetarFormulario();
        }

        // Resetar formul√°rio
        function resetarFormulario() {
            document.getElementById('eja-form').style.display = 'block';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('resultado').style.display = 'none';
            document.getElementById('eja-form').reset();
        }

        // Enviar formul√°rio
        async function enviarFormulario(event) {
            event.preventDefault();
            
            const form = document.getElementById('eja-form');
            const loading = document.getElementById('loading');
            const resultado = document.getElementById('resultado');
            const whatsappLink = document.getElementById('whatsapp-link');
            
            // Mostrar loading
            form.style.display = 'none';
            loading.style.display = 'block';
            
            // Coletar dados
            const formData = new FormData(form);
            const dados = {
                nome: formData.get('nome'),
                email: formData.get('email'),
                telefone: formData.get('telefone'),
                escolaridade: formData.get('escolaridade'),
                origem: 'popup-simples',
                url_origem: window.location.href,
                timestamp: new Date().toISOString()
            };
            
            try {
                // Enviar para webhook
                const response = await fetch(CONFIG.webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(dados)
                });
                
                // Mostrar resultado (independente da resposta)
                loading.style.display = 'none';
                resultado.style.display = 'block';
                
                // Configurar WhatsApp
                const telefone = dados.telefone.replace(/\D/g, '');
                const mensagem = encodeURIComponent(`Ol√°! Vim atrav√©s do site e gostaria de saber mais sobre o EJA. Meu nome √© ${dados.nome}.`);
                whatsappLink.href = `https://wa.me/${CONFIG.consultorWhatsApp}?text=${mensagem}`;
                
                // Auto-fechar em 8 segundos
                setTimeout(fecharPopup, 8000);
                
            } catch (error) {
                console.error('Erro:', error);
                
                // Mesmo com erro, mostra resultado
                loading.style.display = 'none';
                resultado.style.display = 'block';
                
                // Configurar WhatsApp
                const telefone = dados.telefone.replace(/\D/g, '');
                const mensagem = encodeURIComponent(`Ol√°! Vim atrav√©s do site e gostaria de saber mais sobre o EJA. Meu nome √© ${dados.nome}.`);
                whatsappLink.href = `https://wa.me/${CONFIG.consultorWhatsApp}?text=${mensagem}`;
            }
        }

        // Fechar clicando fora
        document.getElementById('popup-overlay').addEventListener('click', function(e) {
            if (e.target === this) {
                fecharPopup();
            }
        });

        // Fechar com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                fecharPopup();
            }
        });
    </script>
</body>
</html>